<!doctype html>
<html lang="en">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>VITOOSH ARTWORKS</title>
  <link rel="preconnect" href="https://fonts.googleapis.com">
  <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
  <link href="https://fonts.googleapis.com/css2?family=Inter:wght@300;400;600&display=swap" rel="stylesheet">
  <style>
    body {
      margin: 0;
      font-family: "Inter", sans-serif;
      background: #fff;
      color: #111;
      -webkit-font-smoothing: antialiased;
    }
    header {
      position: sticky;
      top: 0;
      backdrop-filter: blur(8px);
      background: rgba(255,255,255,0.8);
      border-bottom: 1px solid #eee;
      z-index: 10;
    }
    .nav {
      display: flex;
      justify-content: space-between;
      align-items: center;
      padding: 22px 24px;
      max-width: 1200px;
      margin: 0 auto;
    }
    .brand {
      font-weight: 700;
      letter-spacing: 2px;
      font-size: 18px;
    }
    main {
      max-width: 1200px;
      margin: 0 auto;
      padding: 32px 16px 80px;
    }
    .gallery {
      column-count: 3;
      column-gap: 18px;
    }
    .item {
      display: inline-block;
      width: 100%;
      margin: 0 0 18px;
      break-inside: avoid;
    }
    .item img {
      width: 100%;
      height: auto;
      display: block;
      border-radius: 6px;
      box-shadow: 0 6px 18px rgba(0,0,0,0.05);
      transition: transform 0.25s ease, box-shadow 0.25s ease;
      cursor: pointer;
    }
    .item img:hover {
      transform: translateY(-4px);
      box-shadow: 0 10px 28px rgba(0,0,0,0.08);
    }
    footer {
      text-align: center;
      color: #777;
      font-size: 14px;
      padding: 40px 0;
      border-top: 1px solid #eee;
    }
    @media (max-width: 1000px) { .gallery { column-count: 2; } }
    @media (max-width: 640px) { .gallery { column-count: 1; } }

    /* Lightbox */
    .lightbox {
      position: fixed;
      inset: 0;
      display: none;
      align-items: center;
      justify-content: center;
      background: rgba(0,0,0,0.85);
      z-index: 1000;
    }
    .lightbox.open { display: flex; }
    .lightbox img {
      max-width: 92vw;
      max-height: 90vh;
      border-radius: 8px;
    }
    .lightbox button {
      position: absolute;
      top: 20px;
      right: 24px;
      background: none;
      border: none;
      color: #fff;
      font-size: 28px;
      cursor: pointer;
    }

    /* Loading Spinner */
    .loading {
      display: flex;
      align-items: center;
      justify-content: center;
      height: 60vh;
    }
    .spinner {
      width: 42px;
      height: 42px;
      border: 3px solid #ddd;
      border-top-color: #111;
      border-radius: 50%;
      animation: spin 1s linear infinite;
    }
    @keyframes spin {
      to { transform: rotate(360deg); }
    }
  </style>
</head>
<body>
  <header>
    <div class="nav">
      <div class="brand">VITOOSH ARTWORKS</div>
      <a href="/admin/" style="font-size:13px;color:#777;text-decoration:none;">Admin</a>
    </div>
  </header>

  <main>
    <h2 style="font-weight:600;letter-spacing:1px;margin-bottom:24px;">Gallery</h2>
    <div id="loading" class="loading"><div class="spinner"></div></div>
    <div id="gallery" class="gallery" style="display:none;"></div>
  </main>

  <footer>
    © <span id="year"></span> VITOOSH ARTWORKS
  </footer>

  <div id="lightbox" class="lightbox">
    <button id="closeBtn">✕</button>
    <img id="lightboxImg" src="" alt="">
  </div>

  <script>
    async function loadArtworks() {
      const gallery = document.getElementById('gallery');
      const loading = document.getElementById('loading');
      try {
        const res = await fetch('artworks.json');
        const artworks = await res.json();
        artworks.forEach(img => {
          const div = document.createElement('div');
          div.className = 'item';
          const image = document.createElement('img');
          image.src = img;
          image.alt = 'Artwork';
          image.addEventListener('click', () => openLightbox(img));
          div.appendChild(image);
          gallery.appendChild(div);
        });
      } catch (err) {
        console.error('Error loading artworks:', err);
        loading.innerHTML = '<p style="color:#888;">Failed to load artworks.</p>';
      } finally {
        loading.style.display = 'none';
        gallery.style.display = 'block';
      }
    }

    const lb = document.getElementById('lightbox');
    const lbImg = document.getElementById('lightboxImg');
    const closeBtn = document.getElementById('closeBtn');

    function openLightbox(src) {
      lbImg.src = src;
      lb.classList.add('open');
    }
    function closeLightbox() {
      lb.classList.remove('open');
    }

    closeBtn.addEventListener('click', closeLightbox);
    lb.addEventListener('click', e => { if (e.target === lb) closeLightbox(); });

    document.getElementById('year').textContent = new Date().getFullYear();

    loadArtworks();
  </script>
</body>
</html>
